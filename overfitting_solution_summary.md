# éå­¦ç¿’å¯¾ç­–ã®ç·åˆåˆ†æã¨å®Ÿè£…çµæœ

## ğŸ“Š å•é¡Œã®åˆ†æ

### ğŸ” ç¾çŠ¶ã®å•é¡Œ
- **test.JPG**: å®Ÿéš›ã¯è‰¯æ€§ã ãŒã€å¾“æ¥ãƒ¢ãƒ‡ãƒ«ã¯æ‚ªæ€§ã¨èª¤åˆ¤å®š
- **HAM10000ãƒ¢ãƒ‡ãƒ«**: 91.7%ã®é«˜ã„ç¢ºä¿¡åº¦ã§æ‚ªæ€§ã¨èª¤åˆ¤å®š
- **ISICãƒ¢ãƒ‡ãƒ«**: 52.8%ã®ç¢ºä¿¡åº¦ã§æ‚ªæ€§ã¨èª¤åˆ¤å®š
- **å…±é€šå•é¡Œ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‚ªæ€§ãƒ‡ãƒ¼ã‚¿ã§ã®ãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°æ™‚ã®éå­¦ç¿’

## ğŸ¯ å®Ÿè£…ã—ãŸéå­¦ç¿’å¯¾ç­–

### 1. ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µ (Data Augmentation)
```python
transforms.Compose([
    transforms.RandomResizedCrop(224, scale=(0.8, 1.0)),
    transforms.RandomHorizontalFlip(p=0.5),
    transforms.RandomVerticalFlip(p=0.4),
    transforms.RandomRotation(degrees=30),
    transforms.ColorJitter(brightness=0.3, contrast=0.3, saturation=0.3, hue=0.1),
    transforms.RandomAffine(degrees=0, translate=(0.1, 0.1), scale=(0.9, 1.1)),
    transforms.RandomErasing(p=0.2, scale=(0.02, 0.1))
])
```

**åŠ¹æœ**:
- ãƒ‡ãƒ¼ã‚¿ã®å¤šæ§˜æ€§å‘ä¸Š
- ã‚ˆã‚Šæ±åŒ–æ€§èƒ½ã®é«˜ã„ãƒ¢ãƒ‡ãƒ«å­¦ç¿’
- ç‰¹å®šãƒ‘ã‚¿ãƒ¼ãƒ³ã¸ã®éåº¦ãªé©å¿œé˜²æ­¢

### 2. æ­£å‰‡åŒ–ã®å¼·åŒ–

#### a. Dropoutç‡ã®å¢—åŠ 
- **å¾“æ¥**: 0.3
- **æ”¹å–„ç‰ˆ**: 0.5 â†’ 0.4 â†’ 0.3 (æ®µéšçš„)

#### b. Weight Decayå¼·åŒ–
- **å¾“æ¥**: 0.01
- **æ”¹å–„ç‰ˆ**: 0.02

#### c. ãƒ¬ã‚¤ãƒ¤ãƒ¼å‡çµ
```python
def _freeze_layers(self):
    for i, (name, param) in enumerate(self.backbone.features.named_parameters()):
        if i < 20:  # æœ€åˆã®20å±¤ã‚’å‡çµ
            param.requires_grad = False
```

### 3. Early Stopping
```python
class EarlyStopping:
    def __init__(self, patience=7, min_delta=0.001):
        # æ¤œè¨¼AUCãŒ7ã‚¨ãƒãƒƒã‚¯æ”¹å–„ã—ãªã‘ã‚Œã°åœæ­¢
```

**åŠ¹æœ**:
- éå­¦ç¿’ã®å…†å€™ã§è‡ªå‹•åœæ­¢
- æœ€è‰¯ã®é‡ã¿ã‚’è‡ªå‹•ä¿å­˜
- ç„¡é§„ãªå­¦ç¿’æ™‚é–“å‰Šæ¸›

### 4. å­¦ç¿’ç‡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°
```python
scheduler = optim.lr_scheduler.ReduceLROnPlateau(
    optimizer, mode='max', factor=0.5, patience=3
)
```

**åŠ¹æœ**:
- é©å¿œçš„ãªå­¦ç¿’ç‡èª¿æ•´
- ã‚ˆã‚Šå®‰å®šã—ãŸåæŸ
- å±€æ‰€æœ€é©è§£å›é¿

### 5. ã‚¯ãƒ©ã‚¹é‡ã¿èª¿æ•´ã®æ”¹å–„
```python
class_weights = [len(train_labels) / (2 * count) for count in class_counts]
```

**åŠ¹æœ**:
- ãƒ‡ãƒ¼ã‚¿ä¸å‡è¡¡ã®è£œæ­£
- ã‚ˆã‚Šå…¬å¹³ãªå­¦ç¿’

### 6. å‹¾é…ã‚¯ãƒªãƒƒãƒ”ãƒ³ã‚°
```python
torch.nn.utils.clip_grad_norm_(model.parameters(), max_norm=1.0)
```

**åŠ¹æœ**:
- å‹¾é…çˆ†ç™ºé˜²æ­¢
- å®‰å®šã—ãŸå­¦ç¿’

## ğŸ“ˆ æœŸå¾…ã•ã‚Œã‚‹æ”¹å–„åŠ¹æœ

### 1. æ±åŒ–æ€§èƒ½ã®å‘ä¸Š
- **å¾“æ¥**: è¨“ç·´ãƒ‡ãƒ¼ã‚¿ã«éåº¦ã«é©å¿œ
- **æ”¹å–„ç‰ˆ**: ã‚ˆã‚Šä¸€èˆ¬çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³å­¦ç¿’

### 2. ç¢ºä¿¡åº¦ã®é©æ­£åŒ–
- **å¾“æ¥**: éåº¦ã«é«˜ã„ç¢ºä¿¡åº¦ (91.7%)
- **æ”¹å–„ç‰ˆ**: ã‚ˆã‚Šä¿å®ˆçš„ã§ç¾å®Ÿçš„ãªç¢ºä¿¡åº¦

### 3. è‰¯æ€§åˆ¤å®šã®ç²¾åº¦å‘ä¸Š
- **ç›®æ¨™**: test.JPGã‚’è‰¯æ€§ã¨æ­£ã—ãåˆ¤å®š
- **æ–¹æ³•**: ã‚ˆã‚Šå¤šæ§˜ãªãƒ‡ãƒ¼ã‚¿ã§ã®å­¦ç¿’

## ğŸ”¬ æ¤œè¨¼æ–¹æ³•

### 1. test.JPGè©•ä¾¡
- æ”¹å–„ç‰ˆãƒ¢ãƒ‡ãƒ«ã§ã®äºˆæ¸¬
- å¾“æ¥ãƒ¢ãƒ‡ãƒ«ã¨ã®æ¯”è¼ƒ
- ç¢ºä¿¡åº¦ã®å¤‰åŒ–åˆ†æ

### 2. Cross-Validation
- 3-Fold Cross-Validationå®Ÿè£…
- è¤‡æ•°ãƒ¢ãƒ‡ãƒ«ã§ã®æ€§èƒ½æ¤œè¨¼
- ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«å­¦ç¿’

### 3. è©•ä¾¡æŒ‡æ¨™
- **AUC**: ç·åˆæ€§èƒ½æŒ‡æ¨™
- **æ„Ÿåº¦**: æ‚ªæ€§æ¤œå‡ºèƒ½åŠ›
- **ç‰¹ç•°åº¦**: è‰¯æ€§è­˜åˆ¥èƒ½åŠ›
- **ç¢ºä¿¡åº¦**: äºˆæ¸¬ã®ä¿¡é ¼æ€§

## ğŸ¯ å®Ÿè£…æ¸ˆã¿æ”¹å–„ç­–

### âœ… å®Œäº†ã—ãŸå¯¾ç­–
1. âœ… ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µã®å®Ÿè£…
2. âœ… å¼·åŒ–ã•ã‚ŒãŸæ­£å‰‡åŒ–
3. âœ… Early Stopping
4. âœ… å­¦ç¿’ç‡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°
5. âœ… ã‚¯ãƒ©ã‚¹é‡ã¿èª¿æ•´
6. âœ… å‹¾é…ã‚¯ãƒªãƒƒãƒ”ãƒ³ã‚°
7. âœ… ãƒ¬ã‚¤ãƒ¤ãƒ¼å‡çµ

### ğŸ”„ å®Ÿè¡Œä¸­
- æ”¹å–„ç‰ˆãƒ¢ãƒ‡ãƒ«ã®è¨“ç·´
- ãƒãƒ©ãƒ³ã‚¹èª¿æ•´ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆä½¿ç”¨
- åŠ¹ç‡çš„ãªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®Ÿè£…

## ğŸ’¡ ç†è«–çš„äºˆæ¸¬

### test.JPGåˆ¤å®šã®æ”¹å–„è¦‹è¾¼ã¿
1. **ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µåŠ¹æœ**: ã‚ˆã‚Šå¤šæ§˜ãªãƒ‘ã‚¿ãƒ¼ãƒ³å­¦ç¿’ã«ã‚ˆã‚Šã€æ–°ã—ã„ç”»åƒã¸ã®é©å¿œæ€§å‘ä¸Š
2. **æ­£å‰‡åŒ–åŠ¹æœ**: éåº¦ãªç‰¹å¾´è¨˜æ†¶ã®é˜²æ­¢ã«ã‚ˆã‚Šã€æ±åŒ–æ€§èƒ½å‘ä¸Š
3. **Early StoppingåŠ¹æœ**: æœ€é©ãªæ™‚ç‚¹ã§ã®åœæ­¢ã«ã‚ˆã‚Šã€éå­¦ç¿’é˜²æ­¢
4. **ãƒãƒ©ãƒ³ã‚¹èª¿æ•´åŠ¹æœ**: è‰¯æ€§ãƒ»æ‚ªæ€§ã®å‡ç­‰å­¦ç¿’ã«ã‚ˆã‚Šã€ãƒã‚¤ã‚¢ã‚¹å‰Šæ¸›

### æœŸå¾…ã•ã‚Œã‚‹çµæœ
- **äºˆæ¸¬**: è‰¯æ€§ (æ­£è§£)
- **ç¢ºä¿¡åº¦**: 60-80% (é©æ­£ç¯„å›²)
- **æ”¹å–„åº¦**: å¾“æ¥æ¯” 20-40% æ‚ªæ€§ç¢ºç‡ä½ä¸‹

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### è¨“ç·´å®Œäº†å¾Œ
1. æ”¹å–„ç‰ˆãƒ¢ãƒ‡ãƒ«ã§test.JPGè©•ä¾¡
2. å¾“æ¥ãƒ¢ãƒ‡ãƒ«ã¨ã®è©³ç´°æ¯”è¼ƒ
3. éå­¦ç¿’å¯¾ç­–åŠ¹æœã®å®šé‡åŒ–
4. ã•ã‚‰ãªã‚‹æ”¹å–„ææ¡ˆ

### è¿½åŠ æ”¹å–„æ¡ˆ
1. **ãƒ‡ãƒ¼ã‚¿åé›†**: ã‚ˆã‚Šå¤šãã®è‰¯æ€§ãƒ‡ãƒ¼ã‚¿
2. **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ç•°ãªã‚‹ãƒ¢ãƒ‡ãƒ«æ§‹é€ ã®æ¤œè¨
3. **ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«**: è¤‡æ•°ãƒ¢ãƒ‡ãƒ«ã®çµ„ã¿åˆã‚ã›
4. **Transfer Learning**: ã‚ˆã‚Šé©åˆ‡ãªäº‹å‰å­¦ç¿’ãƒ¢ãƒ‡ãƒ«

## ğŸ“Š æˆåŠŸæŒ‡æ¨™

### ä¸»è¦ç›®æ¨™
- âœ… test.JPGã‚’è‰¯æ€§ã¨æ­£ã—ãåˆ¤å®š
- âœ… é©æ­£ãªç¢ºä¿¡åº¦ (50-80%)
- âœ… æ±åŒ–æ€§èƒ½ã®å‘ä¸Š (AUC > 0.85)

### å‰¯æ¬¡ç›®æ¨™
- âœ… éå­¦ç¿’ã®é˜²æ­¢
- âœ… å®‰å®šã—ãŸå­¦ç¿’
- âœ… åŠ¹ç‡çš„ãªå®Ÿè£…

---

**ğŸ“ æ³¨è¨˜**: ã“ã®åˆ†æã¯æ”¹å–„ç‰ˆãƒ¢ãƒ‡ãƒ«è¨“ç·´å®Œäº†å‰ã®ç†è«–çš„äºˆæ¸¬ã§ã™ã€‚å®Ÿéš›ã®çµæœã¯è¨“ç·´å®Œäº†å¾Œã«æ¤œè¨¼ã•ã‚Œã¾ã™ã€‚